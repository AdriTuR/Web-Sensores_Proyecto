<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/login-style.css">
    <link rel="preconnect" href="https://fonts.gstatic.com/%22%3E">
    <script src="https://kit.fontawesome.com/5842e39ab5.js" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.gstatic.com/%22%3E">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.gstatic.com/%22%3E">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/5842e39ab5.js" crossorigin="anonymous"></script>
    <title>Login</title>
</head>
<!-------------------------------------------------------------------------------------------------------------------->
<!--------------------------------------------- BODY DE LA PÁGINA ---------------------------------------------------->
<!-------------------------------------------------------------------------------------------------------------------->
<body>
    <!---------------------------- HEADER DE LA PÁGINA  ------------------------------------------->
    <header id="header">    
        <a href="index.html"><img class="logo" src="images/logoGTI.png" alt="logo del sitio web"></a>
        <a href="index.html"><img class="close" src="images/landing_page/close.png" alt="botón de cerrar"></a>
    </header>
    <!---------------------------- FIN HEADER DE LA PÁGINA  --------------------------------------->

    <!--------------------------------- FORM CONTENT ----------------------------------------------->
    <section id="login-form">
        <div id="box">
            <div id="box1">
                <h1>INICIO DE SESIÓN</h1>
                <hr id="line" width="283" size=2px color="#830053">
                <p class="introtext">Introduce tus datos para acceder al panel de usuario</p>
                <p id="loginError"></p>
            </div>

            <div id="box2">
                <form id="loginForm">
                    <p class="textologin">Usuario:</p>
                    </i><input type="text" name="username" placeholder="&#xf2bd; Introduce tu usuario" style="font-family:Arial, FontAwesome" required>
                    <br>
                    <p class="textologin">Contraseña:</p>
                    </i><input type="password" name="passwd" placeholder="&#xf084; Introduce tu contraseña" style="font-family:Arial, FontAwesome" required>
                    <br>
                    <a href="#" id="olvidar" onclick="abrirFormulario()">
                        <p id="olvidado">¿Has olvidado tu contraseña?</p>
                    </a>
                    <input type="submit" id="loginBtn" value="INICIAR SESIÓN" required>
                    <br>
                </form>
            </div>
        </div>
    </section>
    <!--------------------------------- FIN FORM CONTENT -------------------------------------------->


    <!--------------------------------- Formulario de "¿Has olvidado tu contraseña?"----------------->
    <div class="formulario-olvidar" id="formulario_olvidar">
        <div class="box" id="box-olvidar">
            <img src="images/landing_page/close_icon3png.png" alt="cerrar formulario" width="40px" height="40px" class="cerrar-formulario" onclick="cerrarFormulario()">

            <div class="container_text_olvidar"id="header-box"> 
                <h1 id="title" class="titulo_olvidar">¿HAS OLVIDADO TU CONTRASEÑA?</h1>
                <p>Introduce tu correo electronico 
                y recibiras en breves tu contraseña</p>  
            </div>

            <div id="content-form-box">
                <form>
                    <p> <p class="correo_formulario_olvidar">Correo:</p>
                        <label for="correo" class="colocar_correo"></label>
                        <input type="text" name="introducir_correo" id="correo" placeholder="Escribe tu correo" required maxlength="120" class="colocar_correo_olvidar">
                    </p>
                    <button type="submit" name="enviar_contraseña_olvidada" id="enviar"><a>ENVIAR</a></button>
                </form>
            </div>
        </div>
    </div>

    <!---------------------SCRIPTS PARA LA VENTANA DE CONTRASEÑA OLVIDADA--------------------->
    <script>
        //-------------------FUNCIÓN ABRIR FORMULARIO---------------------//
        function abrirFormulario() {
            document.getElementById("formulario_olvidar").style.visibility = "visible";
            document.getElementById("formulario_olvidar").style.display = "flex";
            document.getElementById("body").style.overflow = "hidden";
        }
        //-------------------FUNCIÓN CERRAR FORMULARIO--------------------//
        function cerrarFormulario() {
            document.getElementById("formulario_olvidar").style.visibility = "hidden";
            document.getElementById("formulario_olvidar").style.display = "none";
            document.getElementById("body").style.overflow = "scroll";   
        }
        //----------------------------------------------------------------//

        window.addEventListener("load", function(){
            fetch("/api/v1/", {
                method: "GET"
            }).then(function (result) {
                return result.json();
            }).then(function (data) {
                if(data.role == "USER"){
                    location.href = "/user_panel.html";
                }else if(data.role == "ADMIN"){
                    location.href = "/admin_panel.html";
                }
            }); 
        });

     </script>
     
    <!-------------------------------- FOOTER DE LA PÁGINA ------------------------------------------>
    <footer id="footer">
        <p>Company © Grado en Tecnologías Interactivas.<br> All rights reserved.</p>
    </footer>
    <!------------------------------- FIN FOOTER DE LA PÁGINA ---------------------------------------->

</body>
<script src="../js/login.js"></script>
<!-------------------------------------------------------------------------------------------------------------------->
<!--------------------------------------------- FIN BODY DE LA PÁGINA ------------------------------------------------>
<!-------------------------------------------------------------------------------------------------------------------->
</html>